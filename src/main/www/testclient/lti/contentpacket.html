<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Testklient for LTI</title>
        <link href='../css/w3.css' media='screen' rel='stylesheet' type='text/css'/>
        <link href='../css/testclient.css' media='screen' rel='stylesheet' type='text/css'/>
        <style type="text/css">
            iframe {
                border: none;
            }
            #slideshow {

            }
            #slideshow .slide {
                position: relative;
            }
            .slideshow-progressbar {
                width: 100%;
                height: 4mm;
            }
            .previous-next-container {
                width: 100%;
                height: 7mm;
                position: relative;
            }
            .previous-next-container a {
                position: absolute;
                bottom: 1mm;
                top: 1mm;
                width: 20%;
                background-color: #20588F;
                border-radius: 1mm;
                cursor: pointer;
                text-align: center;
                color: white;
                font-size: small
            ;
            }
            .previous-next-container .prev {
                left: 0mm;
            }
            .previous-next-container .next {
                right: 0mm;
            }
        </style>
        <script type="text/javascript" src="../js/jquery-1.11.3.min.js"></script>
        <script type="text/javascript" src="../js/superagent.js"></script>
        <script type="text/javascript">
            function range(num){
                return Array.apply(null, Array(num)).map(function(_, i){return i;});
            }
            function updateProgressBar(){
                var numSlides = $("#slideshow > .slide").size();
                var progressBarWidth = $(".slideshow-progressbar").width();
                var progressBarHeight = $(".slideshow-progressbar").height();
                $(".slideshow-progressbar svg")
                        .attr("width", progressBarWidth)
                        .attr("height", progressBarHeight);
                var backgroundLinePadding = progressBarHeight / 2;
                var slideSpacing = (progressBarWidth - 2*backgroundLinePadding) / (numSlides-1);
                var slideXPositions = range(numSlides).map(function(i){return backgroundLinePadding + (i * slideSpacing);});
                $(".progressbar-slide")
                        .attr("cx", function(index) {
                            return slideXPositions[$(this).attr("index")];
                        });
                $(".progressbar-backgroundline")
                        .attr("x2", progressBarWidth - backgroundLinePadding);
            }
            function drawProgressBar(){
                var progressBar = $(".slideshow-progressbar > svg");
                progressBar.find(".progressbar-backgroundline-group").empty();
                progressBar.find(".progressbar-slides-group").empty();
                var progressBarWidth = $(".slideshow-progressbar").width();
                var progressBarHeight = $(".slideshow-progressbar").height();
                progressBar
                        .attr("width", progressBarWidth)
                        .attr("height", progressBarHeight);
                var backgroundLinePadding = progressBarHeight / 2;
                var backgroundLine = $(document.createElementNS("http://www.w3.org/2000/svg", "line"));
                backgroundLine
                        .attr("class", "progressbar-backgroundline")
                        .attr("x1", backgroundLinePadding)
                        .attr("y1", backgroundLinePadding)
                        .attr("x2", progressBarWidth - backgroundLinePadding)
                        .attr("y2", backgroundLinePadding)
                        .attr("stroke", "rgb(96,96,96)")
                        .attr("stroke-width", "2");
                progressBar.find(".progressbar-backgroundline-group").append(backgroundLine);
                var progressBarSlidesGroup = progressBar.find(".progressbar-slides-group");
                var numSlides = $("#slideshow > .slide").size();
                var slideSpacing = (progressBarWidth - 2*backgroundLinePadding) / (numSlides-1);
                var slideXPositions = range(numSlides).map(function(i){return backgroundLinePadding + (i * slideSpacing);});
                for(var key in slideXPositions){
                    var xPos = slideXPositions[key];
                    var circle = $(document.createElementNS("http://www.w3.org/2000/svg", "circle"));
                    circle
                        .attr("class", "progressbar-slide")
                        .attr("index", key)
                        .attr("cx", xPos)
                        .attr("cy", backgroundLinePadding)
                        .attr("r", 0.95*backgroundLinePadding)
                        .attr("fill", "url(#inactiveSlideGradient)")
                        .attr("stroke", "rgb(96,96,96)")
                        .attr("stroke-width", "1");
                    progressBarSlidesGroup.append(circle);
                }

                $("#slide1").attr("fill", "url(#activeSlideGradient)");
                $(".slideshow-progressbar > svg .progressbar-slide").attr("fill", "url(#inactiveSlideGradient)");
            }

            function nextSlide(){
                $("#slideshow > .slide:first")
                        .hide()
                        .next()
                        .show()
                        .end()
                        .appendTo("#slideshow");
                $(".slideshow-progressbar > svg .progressbar-slide:first")
                        .attr("fill", "url(#inactiveSlideGradient)")
                        .next()
                        .attr("fill", "url(#activeSlideGradient)")
                        .end()
                        .appendTo(".slideshow-progressbar > svg > .progressbar-slides-group");
            }
            function prevSlide(){
                $("#slideshow > .slide")
                        .first()
                        .hide()
                        .end()
                        .last()
                        .show()
                        .prependTo("#slideshow");
                $(".slideshow-progressbar > svg .progressbar-slide")
                        .attr("fill", "url(#inactiveSlideGradient)")
                        .last()
                        .attr("fill", "url(#activeSlideGradient)")
                        .prependTo(".slideshow-progressbar > svg > .progressbar-slides-group");
            }

            $(document).ready(function(){
                drawProgressBar();
                $(window).resize(function(){updateProgressBar();});
                $("#slideshow .slide:gt(0)").hide();
                $(".slideshow-progressbar > svg .progressbar-slide:first").attr("fill", "url(#activeSlideGradient)");
                /*
                        .next()
                        .fadeIn(1000)
                        .end()
                        .appendTo("#slideshow");
                */
            });
        </script>
    </head>
    <body>
        <div id="main-content">
            <div class="w3-container w3-center header">NDLA - Eksempel p√• innholdspakke</div>
            <div class="w3-row">
                <!--<div class="w3-col m1 l2 w3-hide-small">&nbsp;</div>-->
                <!--<div id="slideshow-container" class="w3-col m10 l8 s12">-->
                <div id="slideshow-container">
                    <div id="slideshow">
                        <div class="slide w3-center w3-image">
                            <iframe class="w3-image" src="https://www.youtube.com/embed/sGbxmsDFVnE?feature=oembed" width="640" height="480" title="Star Wars: The Force Awakens Trailer (Official)" allowfullscreen></iframe>
                        </div>
                        <div class="slide w3-center">
                            <iframe src="https://www.youtube.com/embed/IFKnq9QM6_A?feature=oembed" width="640" height="480" title="Elements and atoms" allowfullscreen></iframe>
                        </div>
                        <div class="slide w3-center">
                            <iframe src="https://www.youtube.com/embed/I2apGYUX7Q0?feature=oembed" width="640" height="480" title="Why Can't We See Evidence of Alien Life?" allowfullscreen></iframe>
                        </div>
                        <div class="slide w3-center">
                            <iframe src="https://quizlet.com/59019558/flashcards/embedv2" width="640" height="480" title="Animals" allowfullscreen></iframe>
                        </div>
                    </div>
                </div>
                <!--<div class="w3-col m1 l2 w3-hide-small">&nbsp;</div>-->
            </div>
            <div class="w3-row" style="">&nbsp;</div>
            <div class="w3-row">
                <div class="w3-col s2 m3 l4">&nbsp;</div>
                <div class="w3-col s8 m6 l4">
                    <div class="slideshow-progressbar">
                        <svg>
                            <defs>
                                <linearGradient id="inactiveSlideGradient" x1="50%" y1="0%" x2="50%" y2="100%">
                                    <stop offset="0%" style="stop-color:rgb(96,96,96);stop-opacity: 1"></stop>
                                    <stop offset="100%" style="stop-color:rgb(160,160,160);stop-opacity: 1"></stop>
                                </linearGradient>
                                <linearGradient id="activeSlideGradient" x1="50%" y1="0%" x2="50%" y2="100%">
                                    <stop offset="0%" style="stop-color:rgb(192,192,192);stop-opacity: 1"></stop>
                                    <stop offset="100%" style="stop-color:rgb(255,255,255);stop-opacity: 1"></stop>
                                </linearGradient>
                            </defs>
                            <g class="progressbar-backgroundline-group"></g>
                            <g class="progressbar-slides-group"></g>
                        </svg>
                    </div>
                </div>
                <div class="w3-col s2 m3 l4">&nbsp;</div>
            </div>
            <div class="w3-row" style="">&nbsp;</div>
            <div class="w3-row">
                <div class="w3-col s2 m3 l4">&nbsp;</div>
                <div class="w3-col s8 m6 l4">
                    <div class="previous-next-container">
                        <a class="prev" onclick="prevSlide()">Forrige</a>
                        <a class="next" onclick="nextSlide()">Neste</a>
                    </div>
                </div>
                <div class="w3-col s2 m3 l4">&nbsp;</div>
            </div>
        </div>
    </body>
</html>
